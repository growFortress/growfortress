/* Progress bar container */
.container {
  position: relative;
  width: 100%;
  height: 8px;
  background: var(--color-bg-deep);
  border-radius: var(--radius-full);
  overflow: hidden;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.4);
}

/* Size variants */
.sizeXs {
  height: 4px;
}

.sizeSm {
  height: 6px;
}

.sizeMd {
  height: 8px;
}

.sizeLg {
  height: 12px;
}

.sizeXl {
  height: 16px;
}

/* Fill bar */
.fill {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  border-radius: inherit;
  transition: width 0.4s var(--ease-spring);
  will-change: width;
}

/* Animated fill (for smooth updates) */
.animated {
  transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Instant fill (no animation) */
.instant {
  transition: none;
}

/* Gradient overlay for depth */
.fill::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.25) 0%,
    transparent 50%,
    rgba(0, 0, 0, 0.1) 100%
  );
  border-radius: inherit;
}

/* Shimmer effect */
.fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 100%
  );
  animation: shimmer 2s ease-in-out infinite;
}

@keyframes shimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

/* Variant: Primary (cyan/teal) */
.variantPrimary {
  background: linear-gradient(
    90deg,
    var(--color-primary-60) 0%,
    var(--color-primary) 50%,
    var(--color-primary-60) 100%
  );
  box-shadow: 0 0 8px var(--color-primary-30);
}

/* Variant: Secondary (purple) */
.variantSecondary {
  background: linear-gradient(
    90deg,
    var(--color-secondary-60) 0%,
    var(--color-secondary) 50%,
    var(--color-secondary-60) 100%
  );
  box-shadow: 0 0 8px var(--color-secondary-30);
}

/* Variant: Accent (red/coral) */
.variantAccent {
  background: linear-gradient(
    90deg,
    var(--color-accent-60) 0%,
    var(--color-accent) 50%,
    var(--color-accent-60) 100%
  );
  box-shadow: 0 0 8px var(--color-accent-30);
}

/* Variant: Success (green) */
.variantSuccess {
  background: linear-gradient(
    90deg,
    hsl(140, 60%, 35%) 0%,
    hsl(140, 70%, 45%) 50%,
    hsl(140, 60%, 35%) 100%
  );
  box-shadow: 0 0 8px hsla(140, 70%, 45%, 0.3);
}

/* Variant: Warning (amber) */
.variantWarning {
  background: linear-gradient(
    90deg,
    hsl(38, 80%, 40%) 0%,
    hsl(45, 90%, 55%) 50%,
    hsl(38, 80%, 40%) 100%
  );
  box-shadow: 0 0 8px hsla(45, 90%, 55%, 0.3);
}

/* Variant: Health (red-green gradient based on value) */
.variantHealth {
  background: linear-gradient(
    90deg,
    hsl(0, 70%, 45%) 0%,
    hsl(60, 70%, 45%) 50%,
    hsl(120, 70%, 45%) 100%
  );
  background-size: 200% 100%;
}

/* Variant: XP (golden) */
.variantXp {
  background: linear-gradient(
    90deg,
    hsl(40, 80%, 35%) 0%,
    hsl(45, 90%, 55%) 25%,
    hsl(50, 95%, 60%) 50%,
    hsl(45, 90%, 55%) 75%,
    hsl(40, 80%, 35%) 100%
  );
  box-shadow: 0 0 10px hsla(45, 90%, 55%, 0.4);
}

/* Variant: Mana (blue) */
.variantMana {
  background: linear-gradient(
    90deg,
    hsl(220, 70%, 40%) 0%,
    hsl(210, 80%, 55%) 50%,
    hsl(220, 70%, 40%) 100%
  );
  box-shadow: 0 0 8px hsla(210, 80%, 55%, 0.3);
}

/* Variant: Energy (electric yellow) */
.variantEnergy {
  background: linear-gradient(
    90deg,
    hsl(55, 90%, 40%) 0%,
    hsl(60, 100%, 55%) 50%,
    hsl(55, 90%, 40%) 100%
  );
  box-shadow: 0 0 10px hsla(60, 100%, 55%, 0.4);
}

/* Pulse animation when full (100%) */
.full {
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 8px currentColor;
    filter: brightness(1);
  }
  50% {
    box-shadow: 0 0 16px currentColor, 0 0 24px currentColor;
    filter: brightness(1.15);
  }
}

/* Glow effect for emphasis */
.glow {
  box-shadow: 0 0 12px currentColor;
}

/* Striped pattern */
.striped .fill::after {
  background: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 8px,
    rgba(255, 255, 255, 0.1) 8px,
    rgba(255, 255, 255, 0.1) 16px
  );
  animation: stripeMove 1s linear infinite;
}

@keyframes stripeMove {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 32px 0;
  }
}

/* Label inside bar */
.label {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: var(--font-mono);
  font-size: 10px;
  font-weight: 700;
  color: var(--color-text);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  white-space: nowrap;
  z-index: 1;
}

/* Label position variants */
.labelInside {
  /* Default - centered */
}

.labelRight .label {
  left: auto;
  right: 8px;
  transform: translateY(-50%);
}

.labelLeft .label {
  left: 8px;
  right: auto;
  transform: translateY(-50%);
}

/* External label (above or below) */
.labelExternal {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.labelExternal .label {
  position: static;
  transform: none;
  font-size: 12px;
}

.labelExternal .container {
  width: 100%;
}

/* Show percentage text */
.showPercent .label::after {
  content: '%';
}

/* Indeterminate state */
.indeterminate .fill {
  width: 30% !important;
  animation: indeterminate 1.5s ease-in-out infinite;
}

@keyframes indeterminate {
  0% {
    left: -30%;
  }
  100% {
    left: 100%;
  }
}

/* Segmented bar */
.segmented {
  display: flex;
  gap: 2px;
  background: transparent;
  box-shadow: none;
}

.segment {
  flex: 1;
  height: 100%;
  background: var(--color-bg-deep);
  border-radius: var(--radius-xs);
  overflow: hidden;
}

.segmentFill {
  width: 100%;
  height: 100%;
  transform-origin: left;
  transform: scaleX(0);
  transition: transform 0.3s var(--ease-spring);
}

.segmentFill.active {
  transform: scaleX(1);
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .fill {
    transition: width 0.1s ease;
  }

  .fill::after {
    animation: none;
  }

  .full {
    animation: none;
  }

  .striped .fill::after {
    animation: none;
  }

  .indeterminate .fill {
    animation: none;
    left: 0;
    width: 50% !important;
  }
}
